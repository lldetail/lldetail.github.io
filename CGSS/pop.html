<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="/cursor/style.css">
		<link rel="stylesheet" type="text/css" href="cgss-font.css">
		<script src='trend_song.js'></script>
		<style>
			* {
			  -webkit-box-sizing: border-box;
				 -moz-box-sizing: border-box;
					  box-sizing: border-box;
				font-size: 0.8vw;
			}
			table {
				border-spacing:0px;
			}
			th, td {
				border:1px solid black;
				text-align:center;
			}
			td.des {
				text-align:left;
			}
			img {
				width: 9vw;
			}
			a {
				color: black;
			}
			td.event{
				background-color: yellow;
				font-weight: bold;
			}
			.e1 {
				color: #FF006D;
			}
			.e2 {
				color: #0066FF;
			}
			.e3 {
				color: #FFAE00;
			}
			.e4 {
				color: #666666;
			}
		</style>
	</head>
	<body style="margin: 0px; padding: 1vw">
		<script>
			function id(d){
				return document.getElementById(d);
			};
		</script>
		<select id="events" onchange="load(this.value)"> 
		  <option value="-1">Current/Latest Event</option> 
		</select>
		<br>Selected Event: <span id="sel">Current/Latest Event</span><br>
		Trend Songs: (Notice that there may be some hidden messages especially if the sequence is not ordered by elements (All→Cute→Cool→Passion))<br>
		<table id="pop_list">			
		</table>
		<script>
			eventlist = id("events");
			while (eventlist.options.length > 1) {
				eventlist.remove(1);
			}
			for (i = 0; i < pop_song.length; i++) {
			  var ev = new Option("LIVE PARADE " + (i+1) + " (" + pop_song[i].startdate + " ~ " + pop_song[i].enddate + ")", i);
			  eventlist.options.add(ev);
			}
			function adddate(s,i){
				dates = s.split("-");
				temp = +dates[2] + (+i);
				if (temp > (dates[1]<8?31:30)){
					temp -= (dates[1]<8?31:30);
					dates[1] = +dates[1] + 1;
					if (dates[1] < 10){
						dates[1] = "0" + dates[1];
					}
				}
				if (temp < 10){
					temp = "0" + temp;
				}
				return dates[0] + "-" + dates[1] + "-" + temp;
			}
			function load(i){
				if (i == -1){
					i = pop_song.length - 1;
				}
				id("sel").innerHTML = id("events").options[id("events").selectedIndex].text;
				var tr = "<tr>";
					tr += "<td>";
					tr += "</td>";
				for (j = 1; j <= 10; j++){
					tr += "<td>";
					tr += j;
					tr += "</td>";
				}
				tr += "</tr>";
				for (k = 0; k < pop_song[i].days.length; k++){
				tr += "<tr>";
					tr += "<th rowspan='" + (pop_song[i].days[k].comment==''?2:3) + "'>";
					tr += "<a href='trendimg.html?day=" + i + "_" + k + "'>" + adddate(pop_song[i].startdate, k) + "</a>";
					tr += "</th>";
				for (j = 0; j < 10; j++){
					tr += "<td>";
					tr += "<img src='jacket/jacket_" + pop_song[i].days[k].songs[j] + "_m.png'>";
					tr += "</td>";
				}
				tr += "</tr>";
				tr += "<tr>";
				for (j = 0; j < 10; j++){
					tr += "<td" + (pop_song[i].days[k].songs[j] == pop_song[i].event ?' class="event"':'') + ">";
					var jitem = jacket[pop_song[i].days[k].songs[j]];
					tr += "<span class='e" + jitem["type"] + "'>" + jitem["name"].replace(/\n/,"<br>") + "</span>";
					tr += "</td>";
				}
				if (pop_song[i].days[k].comment != ""){
				tr += "</tr>";
				tr += "<tr>";
					tr += "<td colspan='10' class='des'>";
					var c = pop_song[i].days[k].comment;
					tr += c;
					tr += "</td>";
				tr += "</tr>";
				}
				}
				id("pop_list").innerHTML = tr;
			}
			document.fonts.onloadingdone = function(){
				load(-1);
			};
		</script>
	</body>
</html>